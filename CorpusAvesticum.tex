\ProvidesFile{CorpusAvesticum.tex}[2020/05/14 v0.33.0 Configuration file for
brill]
\RequirePackage{xstring}
\RequirePackage{xspace}
%\xspaceremoveexception{s}
\RequirePackage{collcell}
%\let\collectcell@notabu\collectcell
%\def\collectcell@intabu#1#2\tabu@cellleft{#2\tabu@cellleft\collectcell@notabu{#1}}
%\def\collectcell{\tabu@ifenvir\collectcell@intabu\collectcell@notabu}
\RequirePackage{newunicodechar}
\if@printversion
   \RequirePackage[status=final,layout={margin},author={!!!}]{fixme}
\else
   \RequirePackage[status=draft,layout={margin},author={!!!}]{fixme}
\fi%
\directlua{require("muya")}
\if@countwords
   \directlua{dofile(kpse.find_file"word_count.lua")}
   \def\setwordthreshold#1{%
      \directlua{packagedata.word_count.set_threshold(\number#1)}%
   }
   \def\startwordcount{%
      \directlua{
         luatexbase.add_to_callback(
         "pre_linebreak_filter",
         packagedata.word_count.callback,
         "word_count"
         )
      }%
   }
   \def\stopwordcount{%
      \endgraf %% force paragraph
      \directlua{
         luatexbase.remove_from_callback(
         "pre_linebreak_filter",
         "word_count"
         )
      }%
   }
%%% This outputs the word count to stdout.
   \def\dumpwordcount{%
      \directlua{packagedata.word_count.dump_total_word_count()}
   }
%%% This returns the word count at the current position. Works only at
%%% the end of a paragraph.
   \def\currentwordcount{%
      \directlua{packagedata.word_count.current_word_count()}%
      \logwordcount
   }
%   \def\printwordcount{%
%      \directlua{packagedata.word_count.print_total_word_count()}%
%      \logwordcount
%   }
   \def\logwordcount{%
      \directlua{packagedata.word_count.print_total_word_count_to_log()}%
   }
\else
   \def\setwordthreshold#1{\@gobble}
   \let\startwordcount\relax
   \let\stopwordcount\relax
   \let\dumpwordcount\relax
   \let\currentwordcount\relax
   %   \let\printwordcount\relax
   \let\logwordcount\relax
\fi%

\newsavebox\@titlebox
\newsavebox\@subtitlebox
\newlength{\@titleboxht}
\newlength{\@titleskip}
\renewcommand*{\maketitle}[1][1]{%
   \InputIfFileExists{titlepages.tex}%
      {\ClassInfo{brill}{Information for title pages successfully loaded}}%
      {\ClassWarningNoLine{brill}{Found no titlepage information.\MessageBreak
       Please check, whether you copied titlepages.tex correctly.}}%
   \def\and{\newline}
   \begin{titlepage}
      \setcounter{page}{%
        #1%
      }%
      \let\titlepage@restore\relax
      %\let\footnotesize\small
      \let\footnoterule\relax
      \let\footnote\thanks
      \renewcommand*\thefootnote{\@fnsymbol\c@footnote}%
      \let\@oldmakefnmark\@makefnmark
      \renewcommand*{\@makefnmark}{\rlap\@oldmakefnmark}%
      %%% Calculate title size
      \savebox{\@titlebox}{\parbox[b]{\textwidth}{\centering\usekomafont{title}{\fontsize{28bp}{33bp}\selectfont\@title\par}}}%
      \savebox{\@subtitlebox}{\parbox[b]{\textwidth}{\centering\usekomafont{subtitle}{\fontsize{16bp}{20bp}\selectfont\@subtitle\par}}}%
      %\setlength{\@titleboxht}{\ht\@titlebox}%
      %\addtolength{\@titleboxht}{\dp\@titlebox}%
      %\numdef{\@titleskip}{\dimexpr\@titleboxht / \baselineskip}%
      %\dimdef{\@titleskipdiff}{\@titleskip\baselineskip}
      %\dimdef{\@@titleskipdiff}{\@titleskipdiff - \@titleboxht}
      \ifx\@extratitle\@empty
        \ifx\@frontispiece\@empty
        \else
          \if@twoside\mbox{}\next@tpage\fi
          \noindent\@frontispiece\next@tdpage
        \fi
      \else
        \noindent\@extratitle
        \ifx\@frontispiece\@empty
        \else
          \next@tpage
          \noindent\@frontispiece
        \fi%
        \next@tdpage
      \fi%
      \setparsizes{\z@}{\z@}{\z@\@plus 1fil}\par@updaterelative
      {\centering
         %\lineskiplimit=-\maxdimen%
         %\usebox{\@titlebox}%
         {\vspace*{-33bp}\usekomafont{title}{\fontsize{28bp}{33bp}\selectfont\@title\par}}%
%        {\usekomafont{title}{\fontsize{28bp}{33bp}\selectfont\smash\parbox[t]{\textwidth}{\@title}}}%
%        {\usekomafont{title}{\fontsize{28bp}{33bp}\selectfont\@title\par}}%
%        {\usekomafont{title}{\fontsize{28bp}{33bp}\selectfont\@title\par}}%
         %\vspace*{33bp}%
         %\ifdimgreater{\@titleskipdiff - \@titleboxht}{0pt}%
         %   {\vspace{\dimexpr\@titleskipdiff - \@titleboxht\relax}}%aufgerundet
         %   {\vspace{\baselineskip}\vspace{\dimexpr\@titleskipdiff - \@titleboxht\relax}}%abgerundet
         \ifdimgreater{\ht\@titlebox}{28bp}{\vspace*{3.2bp}}{\vspace*{8.2bp}}%TODO: Fix it
         %\vspace{\dimexpr 1.5\baselineskip - \dp\@titlebox\relax}%
         \prevdepth0pt% \vskip 2\baselineskip
         \ifx\@subtitle\@empty%
         \else%
            \vskip 2\baselineskip
            {%\vspace*{-\dp\@titlebox}%
             \vspace*{-20bp}\usekomafont{subtitle}{\fontsize{16bp}{20bp}\selectfont\@subtitle\par}}%  
             %\vspace*{\dimexpr -20bp+\dp\@subtitlebox\relax}\usekomafont{subtitle}{\fontsize{16bp}{20bp}\selectfont\@subtitle\par}}%
            \vspace*{9.2bp}%
         \fi%
         \prevdepth0pt% 
         \vskip 3\baselineskip
        {\normalsize\itshape By\par}
        \vskip 2\baselineskip
        \vspace*{-17bp}%
        {\fontsize{14bp}{17bp}\selectfont\@author\par}%
        \vfill
        \IfFileExists{\@titlelogofile}%
           {\includegraphics[scale=0.8]{\@titlelogofile}\par\vspace*{\baselineskip}}%
           {}
        {\normalsize\scshape LEIDEN\ |\ BOSTON\par}%
      }%
      \if@PhD\else
         \next@tpage
         \begin{addmargin}[-11mm]{-4mm}
         \begin{minipage}[t]{100mm}
            \footnotesize%
            \raggedright%
            \@uppertitleback%
         \end{minipage}%
         \vfill
         \begin{minipage}[b]{130mm}%
            \footnotesize%
            \raggedright%
            \@lowertitleback%
         \end{minipage}%
         \end{addmargin}\removelastskip%
      \fi%
      \ifx\@dedication\@empty
      \else
        \next@tdpage\null\vfill
        {\centering
        {\usekomafont{dedication}{\fontsize{12bp}{13.2bp}\selectfont\@dedication\par}}%
        \vskip 3\baselineskip
        {\fontsize{24bp}{13.2bp}\selectfont\symbol{"2235}\par}}%
        \vspace*{22\baselineskip}%
        \cleardoubleemptypage
      \fi
      \ifx\titlepage@restore\relax\else\clearpage\titlepage@restore\fi
   \end{titlepage}
   \setcounter{footnote}{0}%
   \global\let\and\relax
}
%\LuaCodeDebugOn
\patchcmd{\imki@putindex}%
   {\immediate\closeout\csname #1@idxfile\endcsname}%
   {\immediate\closeout\csname #1@idxfile\endcsname
    \Ifstr{#1}{passages}{%
      \ClassInfo{brill}{Start modifying passages for sorting ...}%
      \directlua{modifySorting()}%
      \ClassInfo{brill}{... done.}%
    }{}}%
   {\ClassInfo{brill}{\string\imki@putindex\space successfully patched!}}%
   {\ClassInfo{brill}{\string\imki@putindex\space could not be patched!}}%
\patchcmd{\imki@putindex}%
   {\@input@{#1.ind}}%
   {%
      \Ifstr{#1}{passages}%
         {\@input@{passages-mod.ind}}%
         {\@input@{#1.ind}}%
   }%
   {\ClassInfo{brill}{\string\imki@putindex\space successfully patched!}}%
   {\ClassInfo{brill}{\string\imki@putindex\space could not be patched!}}%   
\patchcmd{\imki@putindex}%  
   {\imki@exec{\imki@program\imki@options#1.idx}}%
   {%
      \Ifstr{#1}{passages}%
         {\imki@exec{\imki@program\imki@options#1-mod.idx}}%
         {\imki@exec{\imki@program\imki@options#1.idx}}%
   }%
   {\ClassInfo{brill}{\string\imki@putindex\space successfully patched!}}%
   {\ClassInfo{brill}{\string\imki@putindex\space could not be patched!}}%             
\newcommand{\printindexes}{%
   \begingroup
      \renewcommand*{\subitem}{\par\hangindent 2\normalparindent}%
      \printindex[words]
      \printindex[passages]
   \endgroup
   \printindex[namesandsubjects]
}
\makeindex[%
   name=words,%
   title={Index of Words},%
   columns=2,%
   columnsep=4mm,%
   options={--noheadings --config muya}
   ]%
\makeindex[%
   name=passages,%
   title={Index of Passages},%
   columns=2,%
   columnsep=4mm,%
   options={--noheadings --config muyaPassages}
   ]%
\makeindex[%
   name=namesandsubjects,%
   title={Index of Names and Subjects},%
   columns=2,%
   columnsep=4mm,%
   options={--noheadings --config brill}
   ]%
\protected\def\Word{\@ifstar{\@indexwords}{\@dblarg\@@indexwords}}
\newcommand{\@indexwords}[1]{%
   \StrCut*{#1}{!}{\@leftword}{\@rightword}%
   \ifstrempty{\@rightword}%
      {\index[words]{\indexlanguage!#1@\idxentryfont{#1}}}%
      {\index[words]{\indexlanguage!#1@\idxentryfont{\@rightword}}}%
}%
\newcommand{\@@indexwords}[2][]{%
   \StrCut*{#1}{!}{\@leftword}{\@rightword}%
   \ifstrempty{\@rightword}%
      {\index[words]{\indexlanguage!#1@\idxentryfont{#1}}#2\index[words]{\indexlanguage!#1@\idxentryfont{#1}}}%
      {\index[words]{\indexlanguage!#1@\idxentryfont{#1}}#2\index[words]{\indexlanguage!#1@\idxentryfont{#1}}}%
}%

\protected\def\Passage{\@ifstar{\@indexpassages}{\@dblarg\@@indexpassages}}
\newcommand{\@indexpassages}[1]{\index[passages]{\indexlanguage!#1@\textup{#1}}}
\newcommand{\@@indexpassages}[2][]{%
   \index[passages]{\indexlanguage!#1}\textup{#2}\index[passages]{\indexlanguage!#1}%
}%

\protected\def\Name{\@ifstar{\@indexnamesandsubjects}{\@dblarg\@@indexnamesandsubjects}}
\protected\def\Subject{\@ifstar{\@indexnamesandsubjects}{\@dblarg\@@indexnamesandsubjects}}
\newcommand{\@indexnamesandsubjects}[1]{\index[namesandsubjects]{#1}}
\newcommand{\@@indexnamesandsubjects}[2][]{\index[namesandsubjects]{#1}#2}

\let\passage\Passage
\let\subject\Subject
\let\name\Name
\let\word\Word

\newcommand*{\indexlanguage}{A@General}
\newcommand*{\idxentryfont}[1]{#1}
\newcommand*{\resetlanguage}{\gdef\indexlanguage{A@General}\renewcommand*{\idxentryfont}[1]{##1}}
\newcommand{\ItalicsOrNot}[1]{%
   \IfStrEqCase{#1}{%
      {Aram}{\def\indexlanguage{Aramaic}\itshape}%
      {Arm}{\def\indexlanguage{Armenian}\itshape}%
      {Av}{\def\indexlanguage{Avestan}\itshape}%
      {Bactr}{\def\indexlanguage{Bactrian}\upshape}%
      {Chor}{\def\indexlanguage{Choresmian}\itshape}%
      {El}{\def\indexlanguage{Elamite}\itshape}%
      {Goth}{\def\indexlanguage{Gothic}\itshape}%
      {Grk}{\def\indexlanguage{Greek}\upshape}%
      {Guj}{\def\indexlanguage{Gujarati}\itshape}%
      {Hitt}{\def\indexlanguage{Hittite}\itshape}%
      {IMP}{\def\indexlanguage{Inscriptional Middle Persian}\itshape}%
      {Khot}{\def\indexlanguage{Khotanese}\itshape}%
      {Lat}{\def\indexlanguage{Latin}\itshape}%
      {Lith}{\def\indexlanguage{Lithuanian}\itshape}%
      {Luw}{\def\indexlanguage{Luwian}\itshape}%
      {MAv}{\def\indexlanguage{Middle Avestan}\itshape}
      {MMP}{\def\indexlanguage{Manichaean Middle Persian}\itshape}
      {MP}{\def\indexlanguage{Middle Persian (unspecified)}\itshape}
      {Munji}{\def\indexlanguage{Munji}\itshape}
      {NP}{\def\indexlanguage{New Persian}\itshape}%
      {OAv}{\def\indexlanguage{Old Avestan}\itshape}
      {OE}{\def\indexlanguage{Old English}\itshape}%
      {OHG}{\def\indexlanguage{Old High German}\itshape}%
      {OIrish}{\def\indexlanguage{Old Irish}\itshape}%
      {OP}{\def\indexlanguage{Old Persian}\itshape}%
      {Oss}{\def\indexlanguage{Ossetic}\itshape}%
      {OssD}{\def\indexlanguage{Digoron Ossetic}\itshape}%
      {OssI}{\def\indexlanguage{Iron Ossetic}\itshape}%
      {Parth}{\def\indexlanguage{Parthian}\itshape}
      {PDE}{\def\indexlanguage{Present-Day English}\itshape}%
      {PGmc}{\def\indexlanguage{Proto-Germanic}\itshape}%
      {Phl}{\def\indexlanguage{Pahlavi}\itshape}%
      {PIE}{\def\indexlanguage{Proto-Indo-European}\itshape}%
      {IE}{\def\indexlanguage{Proto-Indo-European}\itshape}%
      {Pashto}{\def\indexlanguage{Pashto}\itshape}%
      {Pli}{\def\indexlanguage{PāỊi}\itshape}%
      {Pra}{\def\indexlanguage{Prakrit}\itshape}%
      {PrIIr}{\def\indexlanguage{Proto-Indo-Iranian}\itshape}%
      {IIr}{\def\indexlanguage{Proto-Indo-Iranian}\itshape}%
      {PrIr}{\def\indexlanguage{Proto-Iranian}\itshape}%
      {Pz}{\def\indexlanguage{Pāzand}\itshape}%
      {Shugni}{\def\indexlanguage{Shugni}\itshape}%
      {Skt}{\def\indexlanguage{Sanskrit}\itshape}%
      {Sogd}{\def\indexlanguage{Sogdian}\itshape}%
      {TochA}{\def\indexlanguage{Tocharian A}\itshape}%
      {TochB}{\def\indexlanguage{Tocharian B}\itshape}%
      {Ved}{\def\indexlanguage{Vedic}\itshape}%
      {Yidgha}{\def\indexlanguage{Yidgha}\itshape}%
      {ZD}{\def\indexlanguage{Zoroastrian Dari}\itshape}%
   }[\def\indexlanguage{A@General}\upshape]%
   \hyphenpenalty=10000%
}
%%% Define macros for languages
\def\newlanguage{\@ifstar\@newlanguage\@@newlanguage}% 
\newcommand{\@newlanguage}[2]{%
   \expandafter\newcommand\csname #1\endcsname[2][]{%
      \def\indexlanguage{#2}%
      \renewcommand*{\idxentryfont}[1]{####1}%
      \begin{hyphenrules}{nohyphenation}##2\end{hyphenrules}%
      \ifstrempty{##1}{}{\ \enquote{##1}}%
      \resetlanguage}
   \newenvironment{#1Block}{%
      \def\indexlanguage{#2}%
      \renewcommand*{\idxentryfont}[1]{####1}\hyphenpenalty=10000\relax}%
   {\resetlanguage}           
}
\newcommand{\@@newlanguage}[2]{%
   \expandafter\newcommand\csname #1\endcsname[2][]{%
      \def\indexlanguage{#2}%
      \renewcommand*{\idxentryfont}[1]{\textit{####1}}%
      \begin{hyphenrules}{nohyphenation}\emph{##2}\end{hyphenrules}%
      \ifstrempty{##1}{}{\ \enquote{##1}}%
      \resetlanguage} 
   \newenvironment{#1Block}{%
      \def\indexlanguage{#2}%
      \renewcommand*{\idxentryfont}[1]{\textit{####1}}\itshape\hyphenpenalty=10000\relax}%
   {\resetlanguage}              
}

\newlanguage{Aram}{Aramaic}
\newlanguage{Arm}{Armenian}
\protected\def\Av{\@ifstar\@Av\@@Av}
\newcommand*{\@Av}[2][]{%
   \def\indexlanguage{Avestan}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}%
   \Word[#2]{\begin{hyphenrules}{nohyphenation}\emph{#2}\end{hyphenrules}}%
   \ifstrempty{#1}{}{\ \enquote{#1}}%
   \resetlanguage}
\newcommand*{\@@Av}[2][]{%
   \def\indexlanguage{Avestan}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}%
   \begin{hyphenrules}{nohyphenation}\emph{#2}\end{hyphenrules}%
   \ifstrempty{#1}{}{\ \enquote{#1}}%
   \resetlanguage}
\let\Avst\Av
\newcommand*{\Bactr}[3][]{%
   \def\indexlanguage{Bactrian}%
   \renewcommand*{\idxentryfont}[1]{##1}%
   \ifstrempty{#2}
      {/#3/}%
      {%
         \begin{hyphenrules}{nohyphenation}#2\end{hyphenrules}%
         \ifstrempty{#3}{}{\ /#3/}%
      }%
   \ifstrempty{#1}{}{\ \enquote{#1}}%
   \resetlanguage}
\newlanguage{Chor}{Choresmian}
\newlanguage{El}{Elamite}
\newlanguage{NP}{New Persian}
\let\Fa\NP
\newlanguage{Goth}{Gothic}
\newlanguage*{Grk}{Greek}
\newlanguage{Guj}{Gujarati}
\let\Gujr\Guj
\newlanguage{Hitt}{Hittite}
\newlanguage{IMP}{Inscriptional Middle Persian}
\newlanguage{Khot}{Khotanese}
\newlanguage{Lat}{Latin}
\newlanguage{Lith}{Lithuanian}
\newlanguage{Luw}{Luwian}
\newlanguage{MAv}{Middle Avestan}
\newlanguage{MMP}{Manichaean Middle Persian}
\newlanguage{MP}{Middle Persian (unspecified)}
\newlanguage{Munji}{Munji}
\newlanguage{OAv}{Old Avestan}
\let\origOE\OE
\let\OE\@undefined
\newlanguage{OE}{Old English}
\newlanguage{OHG}{Old High German}
\newlanguage{OIrish}{Old Irish}
\newcommand*{\OP}[2][]{%
   \@ifnextchar\bgroup{\@OP[#1]{#2}}{\@OP[#1]{#2}{}}}
\newcommand*{\@OP}[3][]{%
   \def\indexlanguage{Old Persian}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}%
   \begin{hyphenrules}{nohyphenation}\textit{#2}\end{hyphenrules}%
   \ifstrempty{#3}{}{\ [#3]}%
   \ifstrempty{#1}{}{\ \enquote{#1}}%
   \resetlanguage
   \@ifnextchar ,{}{\@ifnextchar .{}{\ }}}
\newcommand*{\OPtlt}[2][]{%
   \def\indexlanguage{Old Persian}%
   \renewcommand*{\idxentryfont}[1]{##1}%
   \begin{hyphenrules}{nohyphenation}#2\end{hyphenrules}%
   \ifstrempty{#1}{}{\ \enquote{#1}}%
   \resetlanguage}
\newlanguage{Oss}{Ossetic}
\newlanguage{OssD}{Iron Ossetic}
\newlanguage{OssI}{Iron Ossetic}
\newlanguage{Parth}{Parthian}
\newlanguage{Pashto}{Paṣ̌tō}
\newlanguage{PDE}{Present-Day English}
\newlanguage{PGmc}{Proto-Germanic}
\newif\if@PhlNoEmph
\newrobustcmd*{\Phl}{\@ifstar%
   {%
%%%      \directlua{luatexbase.add_to_callback("post_linebreak_filter",upright_punctuation,"upright_punctuation")}%
      \@PhlNoEmphtrue\@@@Phl%
%%%      \directlua{luatexbase.remove_from_callback("post_linebreak_filter",upright_punctuation,"upright_punctuation")}%
   }%
   {%
%%%      \directlua{luatexbase.add_to_callback("post_linebreak_filter",upright_punctuation,"upright_punctuation")}%
      \@PhlNoEmphfalse\@@@Phl%
%%%      \directlua{luatexbase.remove_from_callback("post_linebreak_filter",upright_punctuation,"upright_punctuation")}%
   }%
}
\newcommand*{\@@@Phl}{%
   % Check for optional argument
   \@ifnextchar[%
      {% Call another macro to see, whether we have a second optional argument
         \@@@@Phl%
      }%
      {% Call the normal command which works with at most one optional argument
         \@Phl%
      }%
}
\def\@@@@Phl[#1]{%
   % There is at least one optional argument. Check for second one.
   \@ifnextchar[%
      {% We have two optional arguments. Therefore #1 could be 'r'. Check
         \Ifstr{#1}{r}{\@Phlreverse}{\@Phl}%
      }%
      {% There is only one optional argument 
         \@Phl[#1]%
      }%
}
\newcommand*{\@Phl}[2][]{%
   \@ifnextchar\bgroup{\@@Phl[#1]{#2}}{\@@Phl[#1]{#2}{}}}
\newcommand*{\@@Phl}[3][]{%
   \def\indexlanguage{Pahlavi}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}%
   \if@PhlNoEmph%
      \ifstrempty{#2}
         {\ifstrempty{#3}{}{#3}}%
         {%
            \begin{hyphenrules}{nohyphenation}#2\end{hyphenrules}%
            \ifstrempty{#3}{}{\ #3}%
         }%
   \else%
      \ifstrempty{#2}
         {% We assume, that #2 and #3 are not both empty
            \textlangle{}#3\textrangle{}%
         }%
         {%
            \begin{hyphenrules}{nohyphenation}\textit{#2}\end{hyphenrules}%
            \ifstrempty{#3}
               {}%
               {\ \textlangle{}#3\textrangle{}}%
         }%
   \fi%
   % We assume, that #2 and #3 are not both empty
   \ifstrempty{#1}{}{\ \enquote{#1}}%
   \resetlanguage%
   \xspace%
}
\newcommand*{\@Phlreverse}[3][]{%
   \def\indexlanguage{Pahlavi}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}%
   \ifstrempty{#3}
      {\begin{hyphenrules}{nohyphenation}\textit{(#2)}\end{hyphenrules}}%
      {%
         \textlangle{}#3\textrangle{}%
         \ifstrempty{#2}{}{\ \begin{hyphenrules}{nohyphenation}\textit{(#2)}\end{hyphenrules}}%   
      }%
   % We assume, that #2 and #3 are not both empty
   \ifstrempty{#1}{}{\ \enquote{#1}}%
   \resetlanguage%
   \xspace%
}
\let\Phlv\Phl
\newcommand*{\Phltlt}[2][]{%
   \def\indexlanguage{Pahlavi}%
   \renewcommand*{\idxentryfont}[1]{##1}%
   \ifstrempty{#2}{}{\begin{hyphenrules}{nohyphenation}#2\end{hyphenrules}}%
   \ifstrempty{#1}{}{\unskip\ \enquote{#1}}%
   \resetlanguage}
\let\Phlvtlt\Phltlt
\newlanguage{PIE}{Proto-Indo-European}
\let\IE\PIE%
\newlanguage{Pli}{PāỊi}
\newlanguage{Pra}{Prakrit}
\newlanguage{PrIIr}{Proto-Indo-Iranian}
\let\IIr\PrIIr%
\newlanguage{PrIr}{Proto-Iranian}
\newlanguage{Pz}{Pāzand}
\newlanguage{Shughni}{Šuγnī}
\newlanguage{Skt}{Sanskrit}
\let\Sa\Skt
\newcommand*{\Sogd}[3][]{%
   \def\indexlanguage{Sogdian}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}%
   \ifstrempty{#2}
      {/#3/}%
      {%
         \begin{hyphenrules}{nohyphenation}\emph{#2}\end{hyphenrules}%
         \ifstrempty{#3}{}{\ /#3/}%
      }%
   \ifstrempty{#1}{}{\ \enquote{#1}}%
   \resetlanguage}
\newlanguage{TochA}{Tocharian A}
\newlanguage{TochB}{Tocharian B}
\newlanguage{Ved}{Vedic}
\let\VedSa\Ved
\newlanguage{Yidgha}{Yidγa}
\newlanguage{ZD}{Zoroastrian Dari}
\newlanguage{Waxi}{Waxī}
\newlanguage{Gilaki}{Gīlakī}
\newlanguage{Ormuri}{Ōrmuṛī}
\newlanguage{Zazaki}{Zāzākī}
\newlanguage{Parachi}{Parāčī}
\newlanguage{Balochi}{Balōčī}
\newlanguage{Yazghulami}{Yazγulāmī}
\newlanguage{Kurmanji}{Kurmanǰī}
%%%
\newenvironment{AvBlock}{%
   \def\indexlanguage{Avestan}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}\itshape\hyphenpenalty=10000\relax}%
   {\resetlanguage}
\let\AvstBlock\AvBlock
\let\endAvstBlock\endAvBlock
\newenvironment{BactrBlock}{%
   \def\indexlanguage{Bactrian}%
   \renewcommand*{\idxentryfont}[1]{##1}\hyphenpenalty=10000\relax}%
   {\resetlanguage}
\let\FaBlock\NPBlock
\let\endFaBlock\endNPBlock
\let\GujrBlock\GujBlock
\let\endGujrBlock\endGujBlock
\newenvironment{PhlBlock}{\def\indexlanguage{Pahlavi}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}\itshape\hyphenpenalty=10000\relax}%
   {\resetlanguage}
\newenvironment{PhltltBlock}{\def\indexlanguage{Pahlavi}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}\itshape\hyphenpenalty=10000\relax}%
   {\resetlanguage}
\let\PhlvBlock\PhlBlock
\let\endPhlvBlock\endPhlBlock
\let\PhlvtltBlock\PhltltBlock
\let\endPhlvtltBlock\endPhltltBlock
\let\IEBlock\PIEBlock
\let\endIEBlock\endPIEBlock
\let\IIrBlock\PrIIrBlock
\let\endIIrBlock\endPrIIrBlock
\let\SaBlock\SkrBlock
\let\endSaBlock\endSkrBlock
\newenvironment{SogdBlock}{%
   \def\indexlanguage{Sogdian}%
   \renewcommand*{\idxentryfont}[1]{\textit{##1}}\itshape\hyphenpenalty=10000\relax}%
   {\resetlanguage}
\let\VedSaBlock\VedBlock
\let\endVedSaBlock\endVedBlock
%%%
\newcommand{\Fr}[1]{\foreignlanguage{french}{#1}}
\newcommand{\Ger}[1]{\foreignlanguage{ngerman}{#1}}
\newcommand{\En}[1]{\foreignlanguage{british}{#1}}
\newenvironment{FrBlock}{\begin{otherlanguage*}{french}}{\end{otherlanguage*}}
\newenvironment{GerBlock}{\begin{otherlanguage*}{ngerman}}{\end{otherlanguage*}}

%%% We define a ``meta macro'' to define all book macros in the same way
\def\newbook{\@dblarg\@newbook}
\def\@newbook[#1]#2{%
    \expandafter\newcommand\csname #2\endcsname[1]{\gls{#1}\nobreak\hspace{\fontdimen2\font}##1}%
}

% We need a second abbreviation list for the apparatus criticus
%\glsaddstoragekey{font}{}{\entryfont}
%\glssetcategoryattribute{appcritfixed}{textformat}{abbrevacfont}
\glssetcategoryattribute{general}{font}{abbrevac}
\renewcommand*{\glsxtrregularfont}[1]{%
   \glsifattribute{\glslabel}{font}{abbrevac}{\textsf{#1}}{#1}}
\newglossary{appcrit}{appcritin}{appcritout}{Abbreviations for the apparatus criticus}
%\renewcommand*{\acronymfont}[1]{{\entryfont{\glslabel}##1}}%
%\renewcommand*{\acronymentry}[1]{{\entryfont{##1}\glsentryshort{##1}}}%
%\renewcommand*{\acronymfont}[1]{{\entryfont{\glslabel}#1}}%
%\newcommand*{\abbrevacfont}[1]{\textup{#1}}
%\newrobustcmd{\abbrevacfont}[1]{%
%   {%
%      \def\glsxtrabbreviationfont##1{\GlsXtrExpandedFmt{\textup}{##1}}%
%      \def\glsxtrregularfont##1{\GlsXtrExpandedFmt{\textup}{##1}}%
%      #1%
%   }%
%}
\def\newabbreviationac{\@ifstar\@newabbreviationac\@@newabbreviationac}
\newcommand*{\@newabbreviationac}[4][]{\newabbreviation[type=appcrit,font=abbrevacfont,#1]{#2}{#3}{#4}\AtEndDocument{\glsadd{#2}}}
\newcommand*{\@@newabbreviationac}[4][]{\newabbreviation[type=appcrit,#1]{#2}{#3}{#4}}

%\newenvironment{abbreviationsac}
%   {\begin{longtabu} to \textwidth{%
%      @{}p{3cm}@{\hspace*{\normalparindent}}>{\raggedright}X@{}}}%
%   {\end{longtabu}}      

\newcommand{\printabbreviationsac}{%
   \renewcommand*{\glsgroupskip}{}%
   \printabbreviations[type=appcrit]%
}
%\AtEndDocument{\glsaddall[category=fixed]}
% We define macros to be used (only) within the apparatus criticus
% We need a special macro for hanging text based on \cs{newline} calls in the export
\newcommand{\appcrnewline}{\par\noindent\hangindent\parindent\hangafter=1\relax}
% We need to know whether we have the first reading
\newif\if@firstrdg

% The main macro steps the counter for the \enquote{footnotes} and starts a list
\newcommand{\app}[1]{%
   \refstepcounter{appcrfootnote}%
   \unskip\textsuperscript{\theappcrfootnote}%
   \@firstrdgtrue%
   \gappto{\@appcr}{\item }#1%
}
% We define a macro for ritual directions
\newcommand{\rd}[1]{%TODO: Spacing
   \par\vspace{.5\baselineskip}%
   \begingroup%
   %\let\newline\appcrnewline%
   \tolerance=1%
   \emergencystretch=\maxdimen%
   \hyphenpenalty=10000%
   \hbadness=10000%
   \noindent% 
   \hangindent\parindent\hangafter=1\relax%
   #1\par\nobreak\vspace{.5\baselineskip}\noindent%
   \endgroup%
   \hangindent\parindent\hangafter=1\relax%
   \ignorespaces%
}
% We need to know, whether it's the first witness (sub)class call
\newif\if@firstwitclass
\newif\if@firstwitsubclass
\newif\if@subreading
% We define a macro for the readings. As this macro can have two optional 
% arguments, we read the first and remember whether it is empty or not
\newcommand{\rdg}[1][]{%
   \ifstrempty{#1}{\@subreadingfalse}{\@subreadingtrue}%
   % Call main macro
   \@rdg
}
% #1: Abbreviation for subreading
% #2: Witnesses
% #3: Reading
\newcommand{\@rdg}[3][]{%
   % If it is not the first reading, add a \cs{par} to the output
   \if@firstrdg\@firstrdgfalse\else\gappto{\@appcr}{\par}\fi%
   % If it is a subreading (non-empty first opt. argument) then start a 
   % nested list (either with label or without depending on second 
   % optional argument)
   \if@subreading
      \ifstrempty{#1}%
         {\gappto{\@appcr}{\begin{appcrenum}\item[]}}%
         {\gappto{\@appcr}{\begin{appcrenum}\item[]\makebox[\normalparindent][l]{#1}}}%#1\hspace{0.5em}}}
   \fi%
   \@firstwitclasstrue%
   \@firstwitsubclasstrue%
   % Add reading to apparatus variable
   \gappto{\@appcr}{\textit{#3}\ \begingroup\frenchspacing}%
   % Evaluate witnesses 
   #2%
   \gappto{\@appcr}{\endgroup}%
   % Close nested list if necessary
   \if@subreading
      \gappto{\@appcr}{\end{appcrenum}}%
   \fi%
}
% Write witness to apparatus
\newcommand{\wit}[1]{\gappto{\@appcr}{#1 }}
 
\newcommand{\witclass}[1]{%
   % If this is not the first witness class call, insert punctuation
   \if@firstwitclass%
      \@firstwitclassfalse%
   \else%
      \@firstwitsubclasstrue\gappto{\@appcr}{\unskip;\ }%
   \fi%
   % Evaluate witness class entries
   #1%
}

\newcommand{\witsubclass}[1]{%
   % If this is not the first witness class call, insert punctuation
   \if@firstwitsubclass%
      \@firstwitsubclassfalse%
   \else%
      \gappto{\@appcr}{\unskip,\ }%
   \fi%
   %  Evaluate witness subclass entries
   #1%
}

% We manually count the words/footnotes in our editorial texts based 
% on \cs{app} calls
\newcounter{appcrfootnote}
\newcounter{nextappcrfootnote}
% We define a list of two levels
\newlist{appcrenum}{enumerate}{2}
\newcommand*{\appcrenumlabelfont}{\addfontfeatures{Numbers={Tabular,Lining}}\scriptsize}
\setlist{font=\appcrenumlabelfont,align=left}
%\setlist[appcrenum, 1]{label=\arabic*,leftmargin=*,itemsep=.5\baselineskip,parsep=0pt}
%\setlist[appcrenum,1]{%
%   label=\arabic*,%
%   leftmargin=*,%
%   labelwidth=\normalparindent,%
%   labelsep=\normalparindent,%
%   itemindent=*,%
%   listparindent=\normalparindent,%
%   itemsep=.25\baselineskip,%
%   parsep=0pt,%
%   first=\DrawEnumitemLabel%
%}
% Second variant
%\setlist[appcrenum,1]{%
%   label=\arabic*,%
%   labelsep=5pt,
%   labelindent=0.5\parindent,
%   itemindent=-5pt,%
%   leftmargin=*,
%   before=\setlength{\listparindent}{-5pt},
%   itemsep=.25\baselineskip,%
%   parsep=0pt,%
%}
\setlist[appcrenum,1]{%
   label=\arabic*,%
   leftmargin=*,%
   %labelwidth=0.5\normalparindent,%
   widest=88,%
   itemsep=.25\baselineskip,%
   parsep=0pt,%
%   labelsep=5pt,
%   labelindent=0.5\parindent,
%   itemindent=-5pt,%
%   leftmargin=*,
%   before=\setlength{\listparindent}{-5pt},
%   itemsep=.25\baselineskip,%
%   parsep=0pt,%
}

%\setlist[appcrenum,2]{%
%   label=\relax,%
%   left=.5\normalparindent,%
%   labelwidth=.5\normalparindent,%
%   labelsep=.5\normalparindent,%
%   itemindent=*,%\normalparindent,%
%   nosep}
\setlist[appcrenum,2]{%
   label=\relax,%
   left=.5\normalparindent,%
   %labelwidth=.5\normalparindent,%
   %labelsep=.5\normalparindent,%
   %itemindent=*,%\normalparindent,%
   nosep}

% Each stanza starts a new mini sections and resets the \enquote{footnote} counter
\newenvironment{stanza}[1]{%
   \minisec{#1}%
   \setcounter{appcrfootnote}{0}%
   % The apparatus is stored in a variable
   \gdef\@appcr{}%
   \hyphenpenalty=10000%
   \let\newline\appcrnewline%
   %\renewcommand{\glstextformat}[1]{\textup{#1}}%
   \hangindent\parindent\hangafter=1\relax%
}{%
   \par%
   % If the apparatus is not empty, output it in two columns
   \ifdefempty{\@appcr}{}{%
      \begin{multicols}{2}%
         \begin{appcrenum}\scriptsize\@appcr\end{appcrenum}
      \end{multicols}%   
   }%
}

\newcommand*{\editedtext}[1]{%
   % we get the current value of appcrfootnote and add 1 -> this would
   % be the next footnote number
   \setcounter{nextappcrfootnote}{\value{appcrfootnote}}%
   \stepcounter{nextappcrfootnote}%
   % We test for specific texts and write them as they are.
   % All others get additional superscript numbers after each word.    
   \Ifstr{#1}{(date, dedication of day and month)}%
      {#1}%
      {{\itshape\StrSubstitute{#1}{ }{\textsuperscript{\upshape\thenextappcrfootnote} }}}%
}

% We need a macro for text portions within the Avestan (italic) text.
% In the XML these are <foreign> elements
\newcommand{\foreign}[2][]{\textup{#2}}
%%%
\newbook{A}
\newbook{AAM}
%\newcommand*{\A}[1]{\gls{A}\nobreakspace{}#1}% Afrinagan
%\newcommand*{\AAM}[1]{\gls{AAM}\nobreakspace{}#1}%
\newbook{Abu}
\newbook{AD}
\newbook{AG}
\newbook{AiJphl}
\newbook{AiJpz}
\newbook{AiW}
\newbook{AM}
\newbook{Ank}
\newbook{Aog}
\newbook{ApSS}
\newbook{As}
\newbook{AV}
\newbook{AVS}
\newbook{AWN}
%\newbook{AvAlph}
\newbook{Bd}
\newbook{CAiP}
\newbook{DB}
\newbook{DNb}
\newbook{DD}
\newbook{Dhu}
\newbook{Dhy}
\newbook{Dk}
\newbook{DkM}
\newbook{DPd}
\newbook{DPe}
\newbook{DrYt}
\newbook{DuP}
\newbook{FiO}
\newbook{FiP}
\newbook{FrD}
\newbook{FrW}
\newbook[G]{Gah}
%\newbook{Gah}
\let\H\@undefined
\newbook{H}
\let\Herbedestan\H
\newbook{Hb}
\let\HB\Hb
\newbook{HN}
\newbook{KB}
\newbook{KN}
\newbook{KPT}
\newbook{Mbh}
\newbook{MHD}
\newbook{MKS}
\newbook{MS}
\newbook{MX}
\newbook{N}
\newbook{NiAb}
\newbook{NiAs}
%\newbook{Nirang}
\newbook{NiSY}
\newbook{NkB}
%\newbook{NP}
\newbook{NS}
\newbook{Ny}
\newbook{PaIr}
\newbook{PaPas}
\newbook{Par}
\newbook{PaXw}
\newbook{PazT}
\newbook{PNy}
\newbook{PRAF}
\newbook{PRDd}
%\newbook{PPhl}
%\newbook{PS}
\newbook{PT}
\newbook{Pur}
\newbook{PV}
\newbook{PVr}
\newbook{PY}
\newbook{PYt}
\newbook{PWD}
\newbook{RAF}
\newbook{RV}
\let\origS\S
\let\S\@undefined
\newbook{S}
\let\Siroza\S
\newbook{SCE}
\newbook{SGW}
\newbook{ShahrEr}
\newbook{SnS}
\newbook{SrB}
\newbook{STi}
\newbook{STii}
\newbook{STSnS}
\newbook{SY}
\newbook{SYt}
\newbook{TB}
\newbook{TS}
\newbook{TSP}
\newbook{V}
\let\Vd\V
\newbook{ViDh}
\newbook{Vim}
\newbook{VN}
\newbook{Vr}
\newbook{VrS}
\newbook{VS}
\newbook{Vyt}
\newbook{VytS}
\newbook{WD}
\newbook{WZ}
\newbook{XPl}
\newbook{Y}
\newbook{YAv}
\newbook{YF}
\newbook{Yt}
%\newbook{YiR}
%\newbook{YVr}
%\newbook{Ygah}
\newbook{ZWY}

\newcommand*{\aee}{ə\char"0304\relax}
\newcommand*{\XVE}{x\textsuperscript{v}}
\newcommand*{\NGVE}{ŋ\textsuperscript{v}}

\newcommand*{\AvA}{\symbol{"10B00}}
\newcommand*{\AvAA}{\symbol{"10B01}}
\newcommand*{\AvAO}{\symbol{"10B02}}
\newcommand*{\AvAAO}{\symbol{"10B03}}
\newcommand*{\AvAN}{\symbol{"10B04}}
\newcommand*{\AvAAN}{\symbol{"10B05}}
\newcommand*{\AvAE}{\symbol{"10B06}}
\newcommand*{\AvAEE}{\symbol{"10B07}}
\newcommand*{\AvE}{\symbol{"10B08}}
\newcommand*{\AvEE}{\symbol{"10B09}}
\newcommand*{\AvO}{\symbol{"10B0A}}
\newcommand*{\AvOO}{\symbol{"10B0B}}
\newcommand*{\AvI}{\symbol{"10B0C}}
\newcommand*{\AvII}{\symbol{"10B0D}}
\newcommand*{\AvU}{\symbol{"10B0E}}
\newcommand*{\AvUU}{\symbol{"10B0F}}
\newcommand*{\AvKE}{\symbol{"10B10}}
\newcommand*{\AvXE}{\symbol{"10B11}}
\newcommand*{\AvXYE}{\symbol{"10B12}}
\newcommand*{\AvXVE}{\symbol{"10B13}}
\newcommand*{\AvGE}{\symbol{"10B14}}
\newcommand*{\AvGGE}{\symbol{"10B15}}
\newcommand*{\AvGHE}{\symbol{"10B16}}
\newcommand*{\AvCE}{\symbol{"10B17}}
\newcommand*{\AvJE}{\symbol{"10B18}}
\newcommand*{\AvTE}{\symbol{"10B19}}
\newcommand*{\AvTHE}{\symbol{"10B1A}}
\newcommand*{\AvDE}{\symbol{"10B1B}}
\newcommand*{\AvDHE}{\symbol{"10B1C}}
\newcommand*{\AvTTE}{\symbol{"10B1D}}
\newcommand*{\AvPE}{\symbol{"10B1E}}
\newcommand*{\AvFE}{\symbol{"10B1F}}
\newcommand*{\AvBE}{\symbol{"10B20}}
\newcommand*{\AvBHE}{\symbol{"10B21}}
\newcommand*{\AvNGE}{\symbol{"10B22}}
\newcommand*{\AvNGYE}{\symbol{"10B23}}
\newcommand*{\AvNGVE}{\symbol{"10B24}}
\newcommand*{\AvNE}{\symbol{"10B25}}
\newcommand*{\AvNYE}{\symbol{"10B26}}
\newcommand*{\AvNNE}{\symbol{"10B27}}
\newcommand*{\AvME}{\symbol{"10B28}}
\newcommand*{\AvHME}{\symbol{"10B29}}
\newcommand*{\AvYYE}{\symbol{"10B2A}}
\newcommand*{\AvYE}{\symbol{"10B2B}}
\newcommand*{\AvVE}{\symbol{"10B2C}}
\newcommand*{\AvRE}{\symbol{"10B2D}}
\newcommand*{\AvLE}{\symbol{"10B2E}}
\newcommand*{\AvSE}{\symbol{"10B2F}}
\newcommand*{\AvZE}{\symbol{"10B30}}
\newcommand*{\AvSHE}{\symbol{"10B31}}
\newcommand*{\AvZHE}{\symbol{"10B32}}
\newcommand*{\AvSHYE}{\symbol{"10B33}}
\newcommand*{\AvSSHE}{\symbol{"10B34}}
\newcommand*{\AvHE}{\symbol{"10B35}}
\newcommand*{\AvAbbrev}{\symbol{"10B39}}
\newcommand*{\AvTTDOOD}{\symbol{"10B3A}}
\newcommand*{\AvSTDOOD}{\symbol{"10B3B}}
\newcommand*{\AvLTDOOD}{\symbol{"10B3C}}
\newcommand*{\AvLODOTD}{\symbol{"10B3D}}
\newcommand*{\AvLTROOR}{\symbol{"10B3E}}
\newcommand*{\AvLOROTR}{\symbol{"10B3F}}
%%% Special characters
%\newunicodechar{←}{{\freeserif\symbol{"2190}}}
%\newunicodechar{→}{{\freeserif\symbol{"2192}}}
\newunicodechar{〈}{\textlangle}% map U+2329 to U+27E8
\newunicodechar{〉}{\textrangle}% map U+232A to U+27E9
\newunicodechar{●}{{\freeserif\symbol{"25CF}}}
\newunicodechar{✓}{{\freeserif\symbol{"2713}}}
\newunicodechar{θ}{ϑ}
%\newunicodechar{݅ }{{\freesans\symbol{"0745}}}
%%%
\newcommand*{\blackcircle}{●}
\renewcommand*{\checkmark}{✓}% from AMSmath
\newcommand*{\leftwardsarrow}{←}
\newcommand*{\rightwardsarrow}{→}
\newcommand*{\sectionsign}{§}
%%% remap from U+2329 to U+27E8 and from U+232A to U+27E9
\renewcommand*{\textlangle}{⟨}% U+27E8
\renewcommand*{\textrangle}{⟩}% U+27E9

\newcommand{\Newtranslation}[3][]{%
   \csgdef{translation-#2}{#3}%
   \ifstrempty{#1}{}{\csgdef{rd-#2}{#1}}%
}
\let\newtranslation\Newtranslation
\def\Gettranslation{\@ifstar\@Gettranslation\@@Gettranslation}
\newcommand{\@Gettranslation}[1]{%
   \bgroup%
   \let\RDTrans\@gobble%
   \csuse{translation-#1}%
   \egroup%
}
\newcommand{\@@Gettranslation}[2][]{%
   \IfStrEqCase{#1}{%
      {t}{%
            \ifcsdef{rd-#2}{\csuse{rd-#2}\par\vspace{\baselineskip}}{}%
            \csuse{translation-#2}%
         }%
      {m}{}%
      {b}{%
            \csuse{translation-#2}%
            \ifcsdef{rd-#2}{\par\vspace{\baselineskip}\csuse{rd-#2}}{}%
         }%
   }[\csuse{translation-#2}]%
}
\let\gettranslation\Gettranslation
\newcommand{\AvTr}[1]{#1}
\newcommand{\Rd}[1]{#1}
%%%
\newif\if@usechapterref
\newcommand*{\Chapterref}[1]{\if@usechapterref\textsuperscript{\ref{#1}}\fi}
\let\chapterref\Chapterref
\newcommand*{\@abbreviationsfile}{../muya.common/abbreviations.tex}
\newcommand*{\SetAbbreviationsFile}[1]{\renewcommand*{\@abbreviationsfile}{#1}}
\newcommand*{\@translationsfile}{../muya.common/translations.tex}
\newcommand*{\SetTranslationsFile}[1]{\renewcommand*{\@translationsfile}{#1}}
%%\newcommand*{\@bibliographyfile}{../muya.common/zotero.bib}
%%\newcommand*{\SetBibliographyFile}[1]{\renewcommand*{\@bibliographyfile}{#1}}
\newcommand*{\@abbreviationsacfile}{../muya.common/abbreviations_ac.tex}
\newcommand*{\SetAbbreviationsacFile}[1]{\renewcommand*{\@abbreviationsacfile}{#1}}
\newcommand*{\@hyphexceptionsfile}{../muya.common/hyphenation-exceptions.tex}
\newcommand*{\SetHyphexceptionsFile}[1]{\renewcommand*{\@hyphexceptionsfile}{#1}}
\newcommand*{\@titlelogofile}{../muya.common/BRILL.pdf}
\newcommand*{\SetTitleLogoFile}[1]{\renewcommand*{\@titlelogofile}{#1}}

\newcommand{\anklink}[2]{#1\hfill\Ank{#2}}

\NewEnviron{Dictionary}[1][Av]%
   {%
      \stepcounter{numberofglossaries}%
      \def\@dictlanguage{#1}%
   }%
   [{%
      \IfStrEqCase{\@dictlanguage}{%
         {Av}{\directlua{sortGlossary("Av")}}%
         {Guj}{\directlua{sortGlossary("Guj")}}%
         {MP}{\directlua{sortGlossary("MP")}}%
      }[]
    }%
      \input{dictionaryconv}]%
% For the dictionary
\newlist{ModDictionary}{description}{1}
\setlist[ModDictionary]{%
   leftmargin=*,%
   font=\normalfont\bfseries\itshape%
}
\newlist{Meanings}{enumerate*}{1}
\setlist[Meanings]{label=\arabic*.,mode=unboxed}
%
\newlist{Sublemmata}{description}{1}
\setlist[Sublemmata]{%
   left=2\parindent,%
   font=\normalfont\bfseries\itshape,%
   before={\def~{\textasciitilde}}%
}
\newlist{Subsublemmata}{description}{1}
\setlist[Subsublemmata]{%
   left=2\parindent,%
   font=\normalfont\bfseries\itshape,%
   before={\def~{\textasciitilde}}%
}
\newlist{Subsubsublemmata}{description}{1}
\setlist[Subsubsublemmata]{%
   left=2\parindent,%
   font=\normalfont\bfseries\itshape,%
   before={\def~{\textasciitilde}}%
}
\newcommand{\Meaning}[2][]{\item #2\ifstrempty{#1}{}{\ (#1)}}
\def\Sublemma{\@ifstar\@Sublemma\@@Sublemma}
\newcommand*{\@Sublemma}[1]{%
   \unskip\nobreak\hspace{\fontdimen2\font}|\nobreak\hspace{\fontdimen2\font}{\bfseries\itshape #1}}
\newcommand*{\@@Sublemma}[1]{\item[#1]\@firstattestationtrue}
%
\def\Subsublemma{\@ifstar\@Subsublemma\@@Subsublemma}
\newcommand*{\@Subsublemma}[1]{%
   \unskip\nobreak\hspace{\fontdimen2\font}|\nobreak\hspace{\fontdimen2\font}{\bfseries\itshape #1}}
\newcommand*{\@@Subsublemma}[1]{\item[#1]\@firstattestationtrue}
%
\def\Subsubsublemma{\@ifstar\@Subsubsublemma\@@Subsubsublemma}
\newcommand*{\@Subsubsublemma}[1]{%
   \unskip\nobreak\hspace{\fontdimen2\font}|\nobreak\hspace{\fontdimen2\font}{\bfseries\itshape #1}}
\newcommand*{\@@Subsubsublemma}[1]{\item[#1]\@firstattestationtrue}

\makeindex[%
   name=dictionary,%
   title={Index of Words},%
   columns=2,%
   columnsep=4mm,%
   options={--noheadings --config muya}
   ]%
\newcommand*{\Lemma}[2][]{\item[#2]}
\newcommand*{\Lemmaoarg}[1]{\ifstrempty{#1}{}{\textlangle{}#1\textrangle{}}}
\newcommand*{\Link}[1]{\unskip\nobreakspace\symbol{"2192}\,#1}

\newcommand{\AirWb}[1]{\textit{AirWb}\nobreakspace{}#1}
\newcommand{\Etym}[1]{#1}
\newcommand{\EWAia}[1]{\textit{EWAia}\nobreakspace{}#1}
\newcommand{\Reference}[1]{#1}
\newcommand{\Translation}[2][]{%
   \IfStrEqCase{#1}{%
      {Phlv}{Pahl.\,tr.:\nobreakspace{}}%
      {Sa}{Sanskrit tr.:\nobreakspace{}}%
   }[]%
\textit{#2}}%
\newcommand{\Stage}[1]{#1}
%%\newcommand{\Ved}[1]{#1}
\newcounter{attestation}
\def\Attestation{\@ifstar%
   {\stepcounter{attestation}\@attestation}%
   {\setcounter{attestation}{1}\@attestation}}
\newif\if@firstattestation
\def\@attestation{\@ifnextchar[{\@@attestation}{\@@attestation[0]}}
\newcommand{\@@attestation}[3][]{%
   \if@firstattestation
      \@firstattestationfalse%
   \else%
      \unskip\nobreak\hspace{\fontdimen2\font}|\nobreak\hspace{\fontdimen2\font}\ignorespaces%
   \fi%
   \ifstrempty{#1}{}{\Ifstr{#1}{0}{\theattestation.}{#1.}}%
   \unskip\nobreak\hspace{\fontdimen2\font}%
   \begin{hyphenrules}{nohyphenation}%
   \IfStrEqCase{\@dictlanguage}{%
      {Av}{\textit{#2}}%
      {MP}{\textlangle{}#2\textrangle{}}%
      {Guj}{\textit{#2}}%
   }[\textit{#2}]%
   \end{hyphenrules}%
   \ #3%
}%

\newcommand{\Pos}[1]{#1}

\ifltxcounter{numberofglossaries}%
   {}%
   {\newcounter{numberofglossaries}}%
\AtBeginDocument{\setcounter{numberofglossaries}{0}}
\newcounter{@numberofglossaries}
\newcommand{\Sequenceofletters}{%
   \par\noindent
   Sequence of letters:\\%
   \setcounter{@numberofglossaries}{\numexpr\value{numberofglossaries}+1\relax}
   \csuse{@sequenceofletters\the@numberofglossaries}%
   \par\vspace{\baselineskip}\noindent}

\newdimen\widestabbreviationac
\setlength{\widestabbreviationac}{0pt}

\newcommand*{\@checkforwidestabbreviationac}[1]{%
   \settowidth{\currentwidth}{#1}%
   \ifdimgreater{\currentwidth}{\widestabbreviationac}%
      {\global\setlength{\widestabbreviationac}{\the\currentwidth}}%
      {}%
}

\AtEndDocument{%
   \ifdimless{\widestabbreviationac}{\normalparindent}%
      {\immediate\write\@auxout%
         {\noexpand\setlength{\widestabbreviationac}{\normalparindent}}%
      }{\ifdimless{\widestabbreviationac}{2\normalparindent}%
         {\immediate\write\@auxout%
            {\noexpand\setlength{\widestabbreviationac}{2\normalparindent}}%
         }{\ifdimless{\widestabbreviationac}{3\normalparindent}%
            {\immediate\write\@auxout%
               {\noexpand\setlength{\widestabbreviationac}{3\normalparindent}}%
            }{\ifdimless{\widestabbreviationac}{4\normalparindent}%
               {\immediate\write\@auxout%
                  {\noexpand\setlength{\widestabbreviationac}{4\normalparindent}}%
               }{\ifdimless{\widestabbreviationac}{5\normalparindent}%
                  {\immediate\write\@auxout%
                     {\noexpand\setlength{\widestabbreviationac}{5\normalparindent}}%
                  }{\ifdimless{\widestabbreviationaac}{6\normalparindent}%
                     {\immediate\write\@auxout%
                        {\noexpand\setlength{\widestabbreviationac}{6\normalparindent}}%
                     }{\immediate\write\@auxout%
                           {\noexpand\setlength{\widestabbreviationac}{7\normalparindent}}%
                     }%
                  }%
               }%
            }%
         }%
      }%
}%
%\newcolumntype{W}{>{\collectcell\testme}p{\widestabbreviationac}<{\endcollectcell}}
%\tabucolumn W

\AtEndPreamble{%
   \InputIfFileExists{\@abbreviationsfile}%
      {\ClassInfo{brill}{Abbreviations successfully loaded!}}%
      {\ClassWarning{brill}{No abbreviation file found!\MessageBreak
       Please use \string\SetAbbreviationsFile\space}}%
   \InputIfFileExists{\@abbreviationsacfile}%
   {}{}    
   \InputIfFileExists{\@translationsfile}%
      {\ClassInfo{brill}{Translations successfully loaded!}}%
      {\ClassWarning{brill}{No translation file found!\MessageBreak
       Please use \string\SetTranslationsFile\space}}%
%   \IfFileExists{\@bibliographyfile}%
%      {\addbibresource{\@bibliographyfile}}%
%      {\ClassWarning{brill}{No bibliography file found!\MessageBreak
%       Please use \string\SetBibliographyFile\space}}%
   \InputIfFileExists{\@hyphexceptionsfile}%
      {\ClassInfo{brill}{Successfully loaded hyphenation exceptions file 
         ``\@hyphexceptionsfile''}%
      }%
      {\ClassInfo{brill}{Could not find hyphenations exceptions file 
         ``\@hyphexceptionsfile''!}%
      }%  
}%

\newcommand*{\supth}{\textsuperscript{th}\xspace}
\newcommand*{\uncertain}[1]{#1\textsuperscript*{\textup{?}}}
\newcommand{\addblankline}[1][1]{\vspace{#1\baselineskip}}
\newcommand{\insertion}[1]{{\upshape #1}}
\newcommand{\RDTrans}[1]{{\itshape #1}}
%\let\@ORIGrealsuperscript\realsuperscript
%\let\@ORIGfakesuperscript\fakesuperscript
%\renewcommand{\realsuperscript}[1]{%
%   \IfStrEqCase{#1}{%
%      {?}{\@ORIGfakesuperscript{#1}}%
%   }[\@ORIGrealsuperscript{#1}]%
%}
%\newcommand*{\realsuperscriptUP}[1]{%
%   \IfStrEqCase{#1}{%
%      {?}{\@ORIGfakesuperscript{?}}%
%   }[\textup{\@ORIGrealsuperscript{#1}}]%
%}
%\let\fakesuperscript\realsuperscriptUP

%\patchcmd{\realsuperscript}{\addfontfeature{VerticalPosition=Superior}#1}%
%   {%
%      \IfStrEqCase{#1}{%
%         {?}{\selectfont#1}%
%      }[\addfontfeature{VerticalPosition=Superior}#1]%
%   }%
%   {\ClassInfo{brill}{`\realsuperscript` successfully patched}}%
%   {\ClassWarning{brill}{Patching of `\realsuperscript` failed}}
%\patchcmd{\fakesuperscript}{\selectfont}{\upshape\selectfont}%
%   {\ClassInfo{brill}{`\fakesuperscript` successfully patched}}%
%   {\ClassWarning{brill}{Patching of `\fakesuperscript` failed}}

\if@PhD
   \newcommand{\declarationPhD}{%
      \cleardoubleemptypage
      \minisec{Declaration for SOAS PhD thesis}
   \noindent I have read and understood Regulation 21 of the General and 
   Admissions Regulations for students of the SOAS, University of London 
   concerning plagiarism. I undertake that all the material presented for 
   examination is my own work and has not been written for me, in whole or in 
   part, by any other person. I also undertake that any quotation or paraphrase 
   from the published or unpublished work of another person has been duly 
   acknowledged in the work which I present for 
   examination.\par\vspace{\baselineskip}
   \noindent Signed: \rule{4cm}{0.4pt} \hfill Date: \rule{4cm}{0.4pt}%
   }
\else
   \let\declarationPhD\relax
\fi%
\pdfstringdefDisableCommands{%
   \renewcommand*{\@@Av}[2][]{#2}%
   \renewcommand*{\Guj}[2][]{#2}%
   \def\gls#1{#1}%
   \def\Y#1{Y~#1}%
   \def\PY#1{PY~#1}%
   \def\Phl#1{Phl~#1}%
}%
      
\endinput
